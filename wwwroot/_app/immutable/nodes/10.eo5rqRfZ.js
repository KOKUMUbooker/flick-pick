import{a as m,f as P,t as D,c as re}from"../chunks/D__f5P3N.js";import"../chunks/DYHuzUNG.js";import{p as te,D as G,J as se,a as ae,G as oe,c as S,s as d,f as y,F as E,w as e,t as W,C as c,r as k}from"../chunks/DJxnAQxZ.js";import{d as le,c as ne,B as ie,b as de}from"../chunks/BE4kj85j.js";import{m as ue}from"../chunks/CSUflvoX.js";import{s as me}from"../chunks/CKTSjATE.js";import{r as ce,i as fe}from"../chunks/JpLCEfp9.js";import{c as v}from"../chunks/C3L73MzT.js";import{g as ve}from"../chunks/DxqAJtII.js";import{e as Q,a as N,b as O,I as T,H as J,c as pe,F as $e,g as ge}from"../chunks/C8kaujdF.js";import{c as _e,a as Pe,A as he,t as we}from"../chunks/KB_K6DwI.js";import{S as be}from"../chunks/D57HcRkC.js";var xe=P("<!> <!> <!>",1),Fe=P("<!> <!> <!>",1),ye=P("<!> <!> <!>",1),Ce=P("<!> <!> <!>",1),Ee=P("<!> ",1),Ne=P('Already have an account? <a href="/login">Log in</a>',1),Se=P('<div class="flex flex-col items-center gap-1 text-center"><h1 class="text-2xl font-bold">Create your account</h1> <p class="text-sm text-balance text-muted-foreground">Fill in the form below to create your account</p></div> <!> <!> <!> <!> <!> <!>',1),ke=P("<form><!></form>");function Ae(M,x){te(x,!0);let A=ce(x,["$$slots","$$events","$$legacy","class"]),l=G({FullName:"",Email:"",Password:"",PasswordConfirm:""}),s=se(G({})),h=G({});function w(a){const _=ge.pick({[a]:!0}).safeParse({[a]:l[a]});_.success?delete e(s)[a]:e(s)[a]=_.error.issues[0].message}const C=_e(()=>({mutationFn:async a=>Pe(`${he}/api/auth/sign-up`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}));function X(){const a=Q.safeParse(l),b=a.success?null:a.error.issues.find(_=>_.path[0]==="PasswordConfirm");b?e(s).PasswordConfirm=b.message:delete e(s).PasswordConfirm}function H(a){h[a]=!0,w(a)}async function Y(a){a.preventDefault(),Object.keys(l).forEach(j=>h[j]=!0);const b=Q.safeParse(l);if(!b.success){oe(s,Object.fromEntries(b.error.issues.map(j=>[j.path[0],j.message])),!0);return}const _=await C.mutateAsync(l);we.success(_.message,{richColors:!0}),ve(`/verify-email?tkn=${_.emailVerificationToken}`)}var I=ke();le(I,a=>({onsubmit:Y,class:a,...A}),[()=>ne("flex flex-col gap-6",x.class)]);var Z=S(I);v(Z,()=>$e,(a,b)=>{b(a,{children:(_,j)=>{var R=Se(),U=d(y(R),2);v(U,()=>N,(p,$)=>{$(p,{children:(g,B)=>{var n=xe(),u=y(n);v(u,()=>O,(r,t)=>{t(r,{for:"FullName",children:(o,L)=>{E();var F=D("Full Name");m(o,F)},$$slots:{default:!0}})});var i=d(u,2);{let r=c(()=>`${e(s)?.FullName?"border-destructive":""}`);T(i,{id:"FullName",type:"text",get class(){return e(r)},onblur:()=>H("FullName"),oninput:()=>h.FullName&&w("FullName"),placeholder:"John Doe",get value(){return l.FullName},set value(t){l.FullName=t}})}var f=d(i,2);{let r=c(()=>e(s)?.FullName||""),t=c(()=>!!e(s)?.FullName);J(f,{variant:"error",get message(){return e(r)},get show(){return e(t)}})}m(g,n)},$$slots:{default:!0}})});var V=d(U,2);v(V,()=>N,(p,$)=>{$(p,{children:(g,B)=>{var n=Fe(),u=y(n);v(u,()=>O,(r,t)=>{t(r,{for:"Email",children:(o,L)=>{E();var F=D("Email");m(o,F)},$$slots:{default:!0}})});var i=d(u,2);{let r=c(()=>`${e(s)?.Email?"border-destructive":""}`),t=c(()=>H.bind(null,"Email"));T(i,{id:"Email",type:"email",get class(){return e(r)},placeholder:"m@example.com",get onblur(){return e(t)},oninput:()=>h.Email&&w("Email"),get value(){return l.Email},set value(o){l.Email=o}})}var f=d(i,2);{let r=c(()=>e(s)?.Email||""),t=c(()=>!!e(s)?.Email);J(f,{variant:"error",get message(){return e(r)},get show(){return e(t)}})}m(g,n)},$$slots:{default:!0}})});var q=d(V,2);v(q,()=>N,(p,$)=>{$(p,{children:(g,B)=>{var n=ye(),u=y(n);v(u,()=>O,(r,t)=>{t(r,{for:"Password",children:(o,L)=>{E();var F=D("Password");m(o,F)},$$slots:{default:!0}})});var i=d(u,2);{let r=c(()=>H.bind(null,"Password")),t=c(()=>`${e(s)?.Password?"border-destructive":""}`);T(i,{id:"Password",get onblur(){return e(r)},oninput:()=>h.Password&&w("Password"),get class(){return e(t)},type:"password",get value(){return l.Password},set value(o){l.Password=o}})}var f=d(i,2);{let r=c(()=>e(s)?.Password?"error":"info");J(f,{get variant(){return e(r)},message:"Must be at least 8 characters long."})}m(g,n)},$$slots:{default:!0}})});var z=d(q,2);v(z,()=>N,(p,$)=>{$(p,{children:(g,B)=>{var n=Ce(),u=y(n);v(u,()=>O,(r,t)=>{t(r,{for:"passwordConfirm",children:(o,L)=>{E();var F=D("Confirm Password");m(o,F)},$$slots:{default:!0}})});var i=d(u,2);{let r=c(()=>`${e(s)?.PasswordConfirm?"border-destructive":""}`);T(i,{id:"passwordConfirm",get class(){return e(r)},onblur:X,oninput:()=>h.PasswordConfirm&&w("PasswordConfirm"),type:"password",get value(){return l.PasswordConfirm},set value(t){l.PasswordConfirm=t}})}var f=d(i,2);{let r=c(()=>e(s)?.PasswordConfirm||""),t=c(()=>!!e(s)?.PasswordConfirm);J(f,{variant:"error",get message(){return e(r)},get show(){return e(t)}})}m(g,n)},$$slots:{default:!0}})});var K=d(z,2);v(K,()=>N,(p,$)=>{$(p,{children:(g,B)=>{ie(g,{get disabled(){return C.isPending},type:"submit",children:(n,u)=>{var i=Ee(),f=y(i);{var r=o=>{be(o,{})};fe(f,o=>{C.isPending&&o(r)})}var t=d(f);W(()=>me(t,` ${C.isPending?"Creating account...":"Create Account"}`)),m(n,i)},$$slots:{default:!0}})},$$slots:{default:!0}})});var ee=d(K,2);v(ee,()=>N,(p,$)=>{$(p,{children:(g,B)=>{var n=re(),u=y(n);v(u,()=>pe,(i,f)=>{f(i,{class:"px-6 text-center",children:(r,t)=>{E();var o=Ne();E(),m(r,o)},$$slots:{default:!0}})}),m(g,n)},$$slots:{default:!0}})}),m(_,R)},$$slots:{default:!0}})}),k(I),m(M,I),ae()}var je=P('<div class="grid min-h-svh lg:grid-cols-2"><div class="flex flex-col gap-4 p-6 md:p-10"><div class="flex flex-1 items-center justify-center"><div class="w-full max-w-xs"><!></div></div></div> <div class="bg-muted relative hidden lg:block"><img alt="sign up side" class="absolute inset-0 h-full w-full object-cover dark:brightness-[0.8] dark:grayscale"/></div></div>');function Ve(M){var x=je(),A=S(x),l=S(A),s=S(l),h=S(s);Ae(h,{}),k(s),k(l),k(A);var w=d(A,2),C=S(w);k(w),k(x),W(()=>de(C,"src",ue)),m(M,x)}export{Ve as component};
