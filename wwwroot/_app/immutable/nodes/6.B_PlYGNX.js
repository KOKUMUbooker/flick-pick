import{e as M,p as K,g as N,a as c,f as $,r as R,t as U,i as q}from"../chunks/i2qjbZCX.js";import"../chunks/0TDw33Fi.js";import{p as z,K as j,L as G,b as Q,s as V,c as g,e as u,f as B,n as W,g as t,J as S,t as C,r as _}from"../chunks/BjJVWsSe.js";import{d as X,c as Y,B as Z,b as ee}from"../chunks/BCgBbjUq.js";import{m as te}from"../chunks/CSUflvoX.js";import{s as se}from"../chunks/BCxAJUJy.js";import{F as re,f as T,a as A,b as ae,I as oe,H as le,c as ie}from"../chunks/DwCgtXDN.js";import{c as ne,t as de,a as ce,A as ue}from"../chunks/qcaP-jiJ.js";import{S as me}from"../chunks/K6lY8tZ2.js";var fe=$("<!> <!> <!>",1),pe=$("<!> ",1),ve=$('<a href="/login" class="underline underline-offset-4">Back to login</a>'),ge=$('<div class="flex flex-col items-center gap-1 text-center"><h1 class="text-2xl font-bold">Forgot password</h1> <p class="text-sm text-balance text-muted-foreground">Enter the email that will receive the password reset link</p></div> <!> <!> <!>',1),_e=$("<form><!></form>");function $e(k,s){M(),z(s,!0);let m=K(s,"ref",15,null),P=R(s,["$$slots","$$events","$$legacy","ref","class"]),r=j({Email:""}),a=G(j({})),f=j({});function E(e){const o=T.pick({[e]:!0}).safeParse({[e]:r[e]});o.success?delete t(a)[e]:t(a)[e]=o.error.issues[0].message}function D(e){f[e]=!0,E(e)}let y=ne(()=>({mutationFn:async e=>ce(`${ue}/api/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));async function H(e){e.preventDefault(),Object.keys(r).forEach(l=>f[l]=!0);const b=T.safeParse(r);if(!b.success){V(a,Object.fromEntries(b.error.issues.map(l=>[l.path[0],l.message])),!0);return}const o=await y.mutateAsync(b.data);de.success(o.message,{richColors:!0})}var h=_e();X(h,e=>({onsubmit:H,class:e,...P}),[()=>Y("flex flex-col gap-6",s.class)]);var J=g(h);re(J,{children:(e,b)=>{var o=ge(),l=u(B(o),2);A(l,{children:(x,O)=>{var p=fe(),w=B(p);ae(w,{for:"Email",children:(n,v)=>{W();var d=U("Email");c(n,d)},$$slots:{default:!0}});var i=u(w,2);{let n=S(()=>`${t(a)?.Email?"border-destructive":""}`),v=S(()=>D.bind(null,"Email"));oe(i,{id:"Email",type:"email",get class(){return t(n)},placeholder:"m@example.com",get onblur(){return t(v)},oninput:()=>f.Email&&E("Email"),get value(){return r.Email},set value(d){r.Email=d}})}var F=u(i,2);{let n=S(()=>t(a)?.Email||""),v=S(()=>!!t(a)?.Email);le(F,{variant:"error",get message(){return t(n)},get show(){return t(v)}})}c(x,p)},$$slots:{default:!0}});var I=u(l,2);A(I,{children:(x,O)=>{Z(x,{type:"submit",get disabled(){return y.isPending},children:(p,w)=>{var i=pe(),F=B(i);{var n=d=>{me(d,{})};q(F,d=>{y.isPending&&d(n)})}var v=u(F);C(()=>se(v,` ${y.isPending?"Submitting...":"Submit"}`)),c(p,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var L=u(I,2);A(L,{children:(x,O)=>{ie(x,{class:"text-center",children:(p,w)=>{var i=ve();c(p,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),c(e,o)},$$slots:{default:!0}}),_(h),N(h,e=>m(e),()=>m()),c(k,h),Q()}var he=$('<div class="grid min-h-svh lg:grid-cols-2"><div class="flex flex-col gap-4 p-6 md:p-10"><div class="flex flex-1 items-center justify-center"><div class="w-full max-w-xs"><!></div></div></div> <div class="relative hidden bg-muted lg:block"><img alt="placeholder" class="absolute inset-0 h-full w-full object-cover dark:brightness-[0.8] dark:grayscale"/></div></div>');function je(k){var s=he(),m=g(s),P=g(m),r=g(P),a=g(r);$e(a,{}),_(r),_(P),_(m);var f=u(m,2),E=g(f);_(f),_(s),C(()=>ee(E,"src",te)),c(k,s)}export{je as component};
