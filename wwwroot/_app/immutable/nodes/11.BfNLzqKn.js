import{a as d,f as h,c as de,t as C}from"../chunks/D__f5P3N.js";import{o as ve,a as fe}from"../chunks/B7bFwcYc.js";import{p as T,c as n,n as W,r as o,a as j,t as z,f as I,w as i,C as D,s as g,G as p,J as G,F as _}from"../chunks/DJxnAQxZ.js";import{s as ue}from"../chunks/CKTSjATE.js";import{p as M,b as X,r as Y,i as y}from"../chunks/JpLCEfp9.js";import{t as me,d as Z,c as ee,s as te,B as N,b as ge}from"../chunks/BE4kj85j.js";import{g as H}from"../chunks/C5_wJgna.js";import{p as pe}from"../chunks/CYxqIRiu.js";import{m as _e}from"../chunks/CSUflvoX.js";import{S as he}from"../chunks/D57HcRkC.js";import{c as xe,a as be,A as ye,t as K}from"../chunks/KB_K6DwI.js";import{M as Q}from"../chunks/lJV4QVYA.js";const we=me({base:"relative grid w-full grid-cols-[0_1fr] items-start gap-y-0.5 rounded-lg border px-4 py-3 text-sm has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] has-[>svg]:gap-x-3 [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card *:data-[slot=alert-description]:text-destructive/90 [&>svg]:text-current"}},defaultVariants:{variant:"default"}});var ke=h("<div><!></div>");function $e(u,a){T(a,!0);let v=M(a,"ref",15,null),r=M(a,"variant",3,"default"),t=Y(a,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var l=ke();Z(l,m=>({"data-slot":"alert",class:m,...t,role:"alert"}),[()=>ee(we({variant:r()}),a.class)]);var s=n(l);te(s,()=>a.children??W),o(l),X(l,m=>v(m),()=>v()),d(u,l),j()}var Pe=h("<div><!></div>");function Ve(u,a){T(a,!0);let v=M(a,"ref",15,null),r=Y(a,["$$slots","$$events","$$legacy","ref","class","children"]);var t=Pe();Z(t,s=>({"data-slot":"alert-description",class:s,...r}),[()=>ee("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a.class)]);var l=n(t);te(l,()=>a.children??W),o(t),X(t,s=>v(s),()=>v()),d(u,t),j()}var Se=h("<!> Sending...",1),Ae=h("<!> Resend Verification",1),Ce=h(`<div class="grid min-h-svh lg:grid-cols-2"><div class="flex flex-col gap-4 p-6 md:p-10"><div class="flex flex-1 items-center justify-center"><div class="w-full max-w-xs"><div class="mb-8 text-center"><div class="mb-4 inline-flex h-14 w-14 items-center justify-center rounded-full bg-primary/10"><!></div> <h1 class="text-2xl font-bold">Email verification</h1> <p class="mt-2 text-muted-foreground">A link was sent to your email, please click it to activate your account or in case it
						has expired request for a new one by pressing resend verification</p></div> <!> <!> <div class="space-y-3"><!> <!></div></div></div></div> <div class="relative hidden bg-muted lg:block"><img alt="Movie background" class="absolute inset-0 h-full w-full object-cover dark:brightness-[0.8] dark:grayscale"/></div></div>`);function qe(u,a){T(a,!0);let v=G(!1),r=G(0),t=null,l=pe.url.searchParams,s=D(()=>l.get("tkn"));ve(async()=>{const e=new URLSearchParams(window.location.search);if(p(s,e.get("tkn")||""),!i(s)){p(v,!0);return}}),fe(()=>{t&&clearInterval(t)});function m(e){p(r,e,!0),t&&clearInterval(t),t=window.setInterval(()=>{p(r,i(r)-1),i(r)<=0&&(p(r,0),clearInterval(t),t=null)},1e3)}let w=xe(()=>({mutationFn:async e=>be(`${ye}/api/auth/resend-verification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));async function ae(){if(!i(s)){K.error("Verification token missing",{richColors:!0});return}const e=await w.mutateAsync({EmailVerificationToken:i(s)});K.success(e.message,{richColors:!0}),m(60),H(`/verify-email?tkn=${e.emailVerificationToken}`,{replaceState:!0})}var k=Ce(),$=n(k),B=n($),F=n(B),P=n(F),R=n(P),re=n(R);{var se=e=>{Q(e,{class:"h-7 w-7 text-primary"})};y(re,e=>{e(se,!1)})}o(R),_(4),o(P);var E=g(P,2);{var ie=e=>{$e(e,{variant:"destructive",class:"mb-6",children:(x,V)=>{Ve(x,{class:"text-center",children:(b,q)=>{_();var S=C("Verification link is invalid or missing.");d(b,S)},$$slots:{default:!0}})},$$slots:{default:!0}})};y(E,e=>{i(v)&&e(ie)})}var L=g(E,2);y(L,e=>{});var J=g(L,2),O=n(J);{let e=D(()=>w.isPending||i(r)>0||!i(s));N(O,{class:"w-full",onclick:ae,get disabled(){return i(e)},children:(x,V)=>{var b=de(),q=I(b);{var S=c=>{var f=Se(),A=I(f);he(A,{}),_(),d(c,f)},le=c=>{var f=C();z(()=>ue(f,`Resend (${i(r)??""}s)`)),d(c,f)},ce=c=>{var f=Ae(),A=I(f);Q(A,{class:"mr-2 h-4 w-4"}),_(),d(c,f)};y(q,c=>{w.isPending?c(S):i(r)>0?c(le,1):c(ce,!1)})}d(x,b)},$$slots:{default:!0}})}var ne=g(O,2);N(ne,{variant:"outline",class:"w-full",onclick:()=>H("/login"),children:(e,x)=>{_();var V=C("Back to Login");d(e,V)},$$slots:{default:!0}}),o(J),o(F),o(B),o($);var U=g($,2),oe=n(U);o(U),o(k),z(()=>ge(oe,"src",_e)),d(u,k),j()}export{qe as component};
