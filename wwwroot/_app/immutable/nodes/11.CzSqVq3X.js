import{p as T,g as W,a as d,r as X,f as h,i as y,d as de,t as I}from"../chunks/i2qjbZCX.js";import{o as ve,a as fe}from"../chunks/B3l48xLc.js";import{p as j,c as n,h as Y,r as o,b as C,t as z,f as M,g as i,J as D,e as g,s as p,L as N,n as _}from"../chunks/BjJVWsSe.js";import{s as ue}from"../chunks/BCxAJUJy.js";import{t as me,d as Z,c as ee,s as te,B as G,b as ge}from"../chunks/BCgBbjUq.js";import{g as H}from"../chunks/CwPZXjMm.js";import{p as pe}from"../chunks/8BGKzr_V.js";import{m as _e}from"../chunks/CSUflvoX.js";import{S as he}from"../chunks/K6lY8tZ2.js";import{c as xe,a as be,A as ye,t as K}from"../chunks/qcaP-jiJ.js";import{M as Q}from"../chunks/DFsH-79C.js";const we=me({base:"relative grid w-full grid-cols-[0_1fr] items-start gap-y-0.5 rounded-lg border px-4 py-3 text-sm has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] has-[>svg]:gap-x-3 [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card *:data-[slot=alert-description]:text-destructive/90 [&>svg]:text-current"}},defaultVariants:{variant:"default"}});var ke=h("<div><!></div>");function $e(u,a){j(a,!0);let v=T(a,"ref",15,null),r=T(a,"variant",3,"default"),t=X(a,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var l=ke();Z(l,m=>({"data-slot":"alert",class:m,...t,role:"alert"}),[()=>ee(we({variant:r()}),a.class)]);var s=n(l);te(s,()=>a.children??Y),o(l),W(l,m=>v(m),()=>v()),d(u,l),C()}var Pe=h("<div><!></div>");function Ve(u,a){j(a,!0);let v=T(a,"ref",15,null),r=X(a,["$$slots","$$events","$$legacy","ref","class","children"]);var t=Pe();Z(t,s=>({"data-slot":"alert-description",class:s,...r}),[()=>ee("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a.class)]);var l=n(t);te(l,()=>a.children??Y),o(t),W(t,s=>v(s),()=>v()),d(u,t),C()}var Se=h("<!> Sending...",1),Ae=h("<!> Resend Verification",1),Ie=h(`<div class="grid min-h-svh lg:grid-cols-2"><div class="flex flex-col gap-4 p-6 md:p-10"><div class="flex flex-1 items-center justify-center"><div class="w-full max-w-xs"><div class="mb-8 text-center"><div class="mb-4 inline-flex h-14 w-14 items-center justify-center rounded-full bg-primary/10"><!></div> <h1 class="text-2xl font-bold">Email verification</h1> <p class="mt-2 text-muted-foreground">A link was sent to your email, please click it to activate your account or in case it
						has expired request for a new one by pressing resend verification</p></div> <!> <!> <div class="space-y-3"><!> <!></div></div></div></div> <div class="relative hidden bg-muted lg:block"><img alt="Movie background" class="absolute inset-0 h-full w-full object-cover dark:brightness-[0.8] dark:grayscale"/></div></div>`);function Ue(u,a){j(a,!0);let v=N(!1),r=N(0),t=null,l=pe.url.searchParams,s=D(()=>l.get("tkn"));ve(async()=>{const e=new URLSearchParams(window.location.search);if(p(s,e.get("tkn")||""),!i(s)){p(v,!0);return}}),fe(()=>{t&&clearInterval(t)});function m(e){p(r,e,!0),t&&clearInterval(t),t=window.setInterval(()=>{p(r,i(r)-1),i(r)<=0&&(p(r,0),clearInterval(t),t=null)},1e3)}let w=xe(()=>({mutationFn:async e=>be(`${ye}/api/auth/resend-verification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));async function ae(){if(!i(s)){K.error("Verification token missing",{richColors:!0});return}const e=await w.mutateAsync({EmailVerificationToken:i(s)});K.success(e.message,{richColors:!0}),m(60),H(`/verify-email?tkn=${e.emailVerificationToken}`,{replaceState:!0})}var k=Ie(),$=n(k),B=n($),L=n(B),P=n(L),R=n(P),re=n(R);{var se=e=>{Q(e,{class:"h-7 w-7 text-primary"})};y(re,e=>{e(se,!1)})}o(R),_(4),o(P);var E=g(P,2);{var ie=e=>{$e(e,{variant:"destructive",class:"mb-6",children:(x,V)=>{Ve(x,{class:"text-center",children:(b,q)=>{_();var S=I("Verification link is invalid or missing.");d(b,S)},$$slots:{default:!0}})},$$slots:{default:!0}})};y(E,e=>{i(v)&&e(ie)})}var F=g(E,2);y(F,e=>{});var J=g(F,2),O=n(J);{let e=D(()=>w.isPending||i(r)>0||!i(s));G(O,{class:"w-full",onclick:ae,get disabled(){return i(e)},children:(x,V)=>{var b=de(),q=M(b);{var S=c=>{var f=Se(),A=M(f);he(A,{}),_(),d(c,f)},le=c=>{var f=I();z(()=>ue(f,`Resend (${i(r)??""}s)`)),d(c,f)},ce=c=>{var f=Ae(),A=M(f);Q(A,{class:"mr-2 h-4 w-4"}),_(),d(c,f)};y(q,c=>{w.isPending?c(S):i(r)>0?c(le,1):c(ce,!1)})}d(x,b)},$$slots:{default:!0}})}var ne=g(O,2);G(ne,{variant:"outline",class:"w-full",onclick:()=>H("/login"),children:(e,x)=>{_();var V=I("Back to Login");d(e,V)},$$slots:{default:!0}}),o(J),o(L),o(B),o($);var U=g($,2),oe=n(U);o(U),o(k),z(()=>ge(oe,"src",_e)),d(u,k),C()}export{Ue as component};
