import{a as c,f as P,r as re,t as O,i as te,d as se}from"../chunks/i2qjbZCX.js";import"../chunks/0TDw33Fi.js";import{p as ae,K,L as oe,b as le,s as ne,c as S,e as d,f as y,n as E,g as e,t as W,J as m,r as k}from"../chunks/BjJVWsSe.js";import{d as ie,c as de,B as ue,b as ce}from"../chunks/BCgBbjUq.js";import{m as me}from"../chunks/CSUflvoX.js";import{s as ve}from"../chunks/BCxAJUJy.js";import{c as f}from"../chunks/DlPwGvb5.js";import{g as fe}from"../chunks/CwPZXjMm.js";import{e as Q,a as N,b as T,I as D,H as J,c as pe,F as $e,g as ge}from"../chunks/DwCgtXDN.js";import{c as _e,a as Pe,A as he,t as we}from"../chunks/qcaP-jiJ.js";import{S as be}from"../chunks/K6lY8tZ2.js";var xe=P("<!> <!> <!>",1),Fe=P("<!> <!> <!>",1),ye=P("<!> <!> <!>",1),Ce=P("<!> <!> <!>",1),Ee=P("<!> ",1),Ne=P('Already have an account? <a href="/login">Log in</a>',1),Se=P('<div class="flex flex-col items-center gap-1 text-center"><h1 class="text-2xl font-bold">Create your account</h1> <p class="text-sm text-balance text-muted-foreground">Fill in the form below to create your account</p></div> <!> <!> <!> <!> <!> <!>',1),ke=P("<form><!></form>");function Ae(L,x){ae(x,!0);let A=re(x,["$$slots","$$events","$$legacy","class"]),l=K({FullName:"",Email:"",Password:"",PasswordConfirm:""}),s=oe(K({})),h=K({});function w(a){const _=ge.pick({[a]:!0}).safeParse({[a]:l[a]});_.success?delete e(s)[a]:e(s)[a]=_.error.issues[0].message}const C=_e(()=>({mutationFn:async a=>Pe(`${he}/api/auth/sign-up`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}));function X(){const a=Q.safeParse(l),b=a.success?null:a.error.issues.find(_=>_.path[0]==="PasswordConfirm");b?e(s).PasswordConfirm=b.message:delete e(s).PasswordConfirm}function M(a){h[a]=!0,w(a)}async function Y(a){a.preventDefault(),Object.keys(l).forEach(j=>h[j]=!0);const b=Q.safeParse(l);if(!b.success){ne(s,Object.fromEntries(b.error.issues.map(j=>[j.path[0],j.message])),!0);return}const _=await C.mutateAsync(l);we.success(_.message,{richColors:!0}),fe(`/verify-email?tkn=${_.emailVerificationToken}`)}var I=ke();ie(I,a=>({onsubmit:Y,class:a,...A}),[()=>de("flex flex-col gap-6",x.class)]);var Z=S(I);f(Z,()=>$e,(a,b)=>{b(a,{children:(_,j)=>{var R=Se(),U=d(y(R),2);f(U,()=>N,(p,$)=>{$(p,{children:(g,B)=>{var n=xe(),u=y(n);f(u,()=>T,(r,t)=>{t(r,{for:"FullName",children:(o,H)=>{E();var F=O("Full Name");c(o,F)},$$slots:{default:!0}})});var i=d(u,2);{let r=m(()=>`${e(s)?.FullName?"border-destructive":""}`);D(i,{id:"FullName",type:"text",get class(){return e(r)},onblur:()=>M("FullName"),oninput:()=>h.FullName&&w("FullName"),placeholder:"John Doe",get value(){return l.FullName},set value(t){l.FullName=t}})}var v=d(i,2);{let r=m(()=>e(s)?.FullName||""),t=m(()=>!!e(s)?.FullName);J(v,{variant:"error",get message(){return e(r)},get show(){return e(t)}})}c(g,n)},$$slots:{default:!0}})});var V=d(U,2);f(V,()=>N,(p,$)=>{$(p,{children:(g,B)=>{var n=Fe(),u=y(n);f(u,()=>T,(r,t)=>{t(r,{for:"Email",children:(o,H)=>{E();var F=O("Email");c(o,F)},$$slots:{default:!0}})});var i=d(u,2);{let r=m(()=>`${e(s)?.Email?"border-destructive":""}`),t=m(()=>M.bind(null,"Email"));D(i,{id:"Email",type:"email",get class(){return e(r)},placeholder:"m@example.com",get onblur(){return e(t)},oninput:()=>h.Email&&w("Email"),get value(){return l.Email},set value(o){l.Email=o}})}var v=d(i,2);{let r=m(()=>e(s)?.Email||""),t=m(()=>!!e(s)?.Email);J(v,{variant:"error",get message(){return e(r)},get show(){return e(t)}})}c(g,n)},$$slots:{default:!0}})});var q=d(V,2);f(q,()=>N,(p,$)=>{$(p,{children:(g,B)=>{var n=ye(),u=y(n);f(u,()=>T,(r,t)=>{t(r,{for:"Password",children:(o,H)=>{E();var F=O("Password");c(o,F)},$$slots:{default:!0}})});var i=d(u,2);{let r=m(()=>M.bind(null,"Password")),t=m(()=>`${e(s)?.Password?"border-destructive":""}`);D(i,{id:"Password",get onblur(){return e(r)},oninput:()=>h.Password&&w("Password"),get class(){return e(t)},type:"password",get value(){return l.Password},set value(o){l.Password=o}})}var v=d(i,2);{let r=m(()=>e(s)?.Password?"error":"info");J(v,{get variant(){return e(r)},message:"Must be at least 8 characters long."})}c(g,n)},$$slots:{default:!0}})});var z=d(q,2);f(z,()=>N,(p,$)=>{$(p,{children:(g,B)=>{var n=Ce(),u=y(n);f(u,()=>T,(r,t)=>{t(r,{for:"passwordConfirm",children:(o,H)=>{E();var F=O("Confirm Password");c(o,F)},$$slots:{default:!0}})});var i=d(u,2);{let r=m(()=>`${e(s)?.PasswordConfirm?"border-destructive":""}`);D(i,{id:"passwordConfirm",get class(){return e(r)},onblur:X,oninput:()=>h.PasswordConfirm&&w("PasswordConfirm"),type:"password",get value(){return l.PasswordConfirm},set value(t){l.PasswordConfirm=t}})}var v=d(i,2);{let r=m(()=>e(s)?.PasswordConfirm||""),t=m(()=>!!e(s)?.PasswordConfirm);J(v,{variant:"error",get message(){return e(r)},get show(){return e(t)}})}c(g,n)},$$slots:{default:!0}})});var G=d(z,2);f(G,()=>N,(p,$)=>{$(p,{children:(g,B)=>{ue(g,{get disabled(){return C.isPending},type:"submit",children:(n,u)=>{var i=Ee(),v=y(i);{var r=o=>{be(o,{})};te(v,o=>{C.isPending&&o(r)})}var t=d(v);W(()=>ve(t,` ${C.isPending?"Creating account...":"Create Account"}`)),c(n,i)},$$slots:{default:!0}})},$$slots:{default:!0}})});var ee=d(G,2);f(ee,()=>N,(p,$)=>{$(p,{children:(g,B)=>{var n=se(),u=y(n);f(u,()=>pe,(i,v)=>{v(i,{class:"px-6 text-center",children:(r,t)=>{E();var o=Ne();E(),c(r,o)},$$slots:{default:!0}})}),c(g,n)},$$slots:{default:!0}})}),c(_,R)},$$slots:{default:!0}})}),k(I),c(L,I),le()}var je=P('<div class="grid min-h-svh lg:grid-cols-2"><div class="flex flex-col gap-4 p-6 md:p-10"><div class="flex flex-1 items-center justify-center"><div class="w-full max-w-xs"><!></div></div></div> <div class="bg-muted relative hidden lg:block"><img alt="sign up side" class="absolute inset-0 h-full w-full object-cover dark:brightness-[0.8] dark:grayscale"/></div></div>');function Ue(L){var x=je(),A=S(x),l=S(A),s=S(l),h=S(s);Ae(h,{}),k(s),k(l),k(A);var w=d(A,2),C=S(w);k(w),k(x),W(()=>ce(C,"src",me)),c(L,x)}export{Ue as component};
