import{p as G,a as c,f as $,t as L}from"../chunks/D__f5P3N.js";import"../chunks/DYHuzUNG.js";import{p as N,D as j,J as R,a as U,G as q,c as g,s as m,f as B,F as z,w as t,C as S,t as D,r as _}from"../chunks/DJxnAQxZ.js";import{d as K,c as Q,B as V,b as W}from"../chunks/BE4kj85j.js";import{m as X}from"../chunks/CSUflvoX.js";import{s as Y}from"../chunks/CKTSjATE.js";import{p as Z,b as ee,r as te,i as re}from"../chunks/JpLCEfp9.js";import{F as se,f as C,a as A,b as ae,I as oe,H as le,c as ie}from"../chunks/C8kaujdF.js";import{c as ne,t as de,a as ce,A as me}from"../chunks/KB_K6DwI.js";import{S as ue}from"../chunks/D57HcRkC.js";var fe=$("<!> <!> <!>",1),pe=$("<!> ",1),ve=$('<a href="/login" class="underline underline-offset-4">Back to login</a>'),ge=$('<div class="flex flex-col items-center gap-1 text-center"><h1 class="text-2xl font-bold">Forgot password</h1> <p class="text-sm text-balance text-muted-foreground">Enter the email that will receive the password reset link</p></div> <!> <!> <!>',1),_e=$("<form><!></form>");function $e(k,r){G(),N(r,!0);let u=Z(r,"ref",15,null),P=te(r,["$$slots","$$events","$$legacy","ref","class"]),s=j({Email:""}),a=R(j({})),f=j({});function E(e){const o=C.pick({[e]:!0}).safeParse({[e]:s[e]});o.success?delete t(a)[e]:t(a)[e]=o.error.issues[0].message}function T(e){f[e]=!0,E(e)}let w=ne(()=>({mutationFn:async e=>ce(`${me}/api/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));async function H(e){e.preventDefault(),Object.keys(s).forEach(l=>f[l]=!0);const b=C.safeParse(s);if(!b.success){q(a,Object.fromEntries(b.error.issues.map(l=>[l.path[0],l.message])),!0);return}const o=await w.mutateAsync(b.data);de.success(o.message,{richColors:!0})}var h=_e();K(h,e=>({onsubmit:H,class:e,...P}),[()=>Q("flex flex-col gap-6",r.class)]);var J=g(h);se(J,{children:(e,b)=>{var o=ge(),l=m(B(o),2);A(l,{children:(x,O)=>{var p=fe(),y=B(p);ae(y,{for:"Email",children:(n,v)=>{z();var d=L("Email");c(n,d)},$$slots:{default:!0}});var i=m(y,2);{let n=S(()=>`${t(a)?.Email?"border-destructive":""}`),v=S(()=>T.bind(null,"Email"));oe(i,{id:"Email",type:"email",get class(){return t(n)},placeholder:"m@example.com",get onblur(){return t(v)},oninput:()=>f.Email&&E("Email"),get value(){return s.Email},set value(d){s.Email=d}})}var F=m(i,2);{let n=S(()=>t(a)?.Email||""),v=S(()=>!!t(a)?.Email);le(F,{variant:"error",get message(){return t(n)},get show(){return t(v)}})}c(x,p)},$$slots:{default:!0}});var I=m(l,2);A(I,{children:(x,O)=>{V(x,{type:"submit",get disabled(){return w.isPending},children:(p,y)=>{var i=pe(),F=B(i);{var n=d=>{ue(d,{})};re(F,d=>{w.isPending&&d(n)})}var v=m(F);D(()=>Y(v,` ${w.isPending?"Submitting...":"Submit"}`)),c(p,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var M=m(I,2);A(M,{children:(x,O)=>{ie(x,{class:"text-center",children:(p,y)=>{var i=ve();c(p,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),c(e,o)},$$slots:{default:!0}}),_(h),ee(h,e=>u(e),()=>u()),c(k,h),U()}var he=$('<div class="grid min-h-svh lg:grid-cols-2"><div class="flex flex-col gap-4 p-6 md:p-10"><div class="flex flex-1 items-center justify-center"><div class="w-full max-w-xs"><!></div></div></div> <div class="relative hidden bg-muted lg:block"><img alt="placeholder" class="absolute inset-0 h-full w-full object-cover dark:brightness-[0.8] dark:grayscale"/></div></div>');function Be(k){var r=he(),u=g(r),P=g(u),s=g(P),a=g(s);$e(a,{}),_(s),_(P),_(u);var f=m(u,2),E=g(f);_(f),_(r),D(()=>W(E,"src",X)),c(k,r)}export{Be as component};
